sudo: false

branches:
  only: deploy

language: node_js

install:
  - git submodule -q update --init
  - npm install --ignore-scripts

script:
  - set -e
  - node-gyp rebuild
  - npm run tslint
  - npm test
  - node ./scripts/prebuild

os:
  - osx
  - linux

node_js:
  - "10"
